# 

## Упражнение 00 — Создадим отдельные представления для людей

| Упражнение 00: Создадим отдельные представления для людей |                  |
| --------------------------------------------------------- | ---------------- |
| Директория для сдачи                                      | ex00             |
| Файды для сдачи                                           | `day04_ex00.sql` |
| **Разрешено**                                             |                  |
| Язык                                                      | ANSI SQL         |

Создайте 2 представления по полу:  

- `v_persons_female`  
- `v_persons_male`  

---

## Глава V

## Упражнение 01 — От частей к общему представлению

| Упражнение 01: От частей к общему представлению |                  |
| ----------------------------------------------- | ---------------- |
| Директория для сдачи                            | ex01             |
| Файлы для сдачи                                 | `day04_ex01.sql` |
| **Разрешено**                                   |                  |
| Язык                                            | ANSI SQL         |

Используйте представления из Упр.00 и объедините имена людей в один список. Сортировка — по имени.  

Пример:  
| name |  
| ------ |  
| Андрей |  
| Анна |  
| ... |  

---

## Глава VI

## Упражнение 02 — «Храним» сгенерированные даты в одном месте

| Упражнение 02: «Храним» сгенерированные даты в одном месте |                        |
| ---------------------------------------------------------- | ---------------------- |
| Директория для сдачи                                       | ex02                   |
| Файлы для сдачи                                            | `day04_ex02.sql`       |
| **Разрешено**                                              |                        |
| Язык                                                       | ANSI SQL               |
| SQL конструкция                                            | `generate_series(...)` |

Создайте представление `v_generated_dates` с датами с 01.01.2022 по 31.01.2022.  

---

## Глава VII

## Упражнение 03 — Найдем пропущенные дни посещений с помощью представления

| Упражнение 03: Найдем пропущенные дни посещений с помощью представления |                  |
| ----------------------------------------------------------------------- | ---------------- |
| Директория для сдачи                                                    | ex03             |
| Файлы для сдачи                                                         | `day04_ex03.sql` |
| **Разрешено**                                                           |                  |
| Язык                                                                    | ANSI SQL         |

Найдите даты января 2022, когда **нет** посещений, используя `v_generated_dates`.  

---

## Глава VIII

## Упражнение 04 — Найдем что-то из теории множеств

| Упражнение 04: Найдем что-то из теории множеств |                  |
| ----------------------------------------------- | ---------------- |
| Директория для сдачи                            | ex04             |
| Файлы для сдачи                                 | `day04_ex04.sql` |
| **Разрешено**                                   |                  |
| Язык                                            | ANSI SQL         |

Реализуйте `(R - S) ∪ (S - R)`.  

- R = посещения 02.01.2022  
- S = посещения 06.01.2022  
  Работаем по `person_id`. Результат сохранить в виде `v_symmetric_union`.  

---

## Глава IX

## Упражнение 05 — Рассчитаем цену со скидкой для каждого человека

| Упражнение 05: Рассчитаем цену со скидкой |                  |
| ----------------------------------------- | ---------------- |
| Директория для сдачи                      | ex05             |
| Файлы для сдачи                           | `day04_ex05.sql` |
| **Разрешено**                             |                  |
| Язык                                      | ANSI SQL         |

Создайте представление `v_price_with_discount`:  

- имя человека, пицца, цена и цена со скидкой 10%.  
- сортировка по имени и названию пиццы.  

---

## Глава X

## Упражнение 06 — Материализация из виртуализации

| Упражнение 06: Материализация из виртуализации |                  |
| ---------------------------------------------- | ---------------- |
| Директория для сдачи                           | ex06             |
| Файлы для сдачи                                | `day04_ex06.sql` |
| **Разрешено**                                  |                  |
| Язык                                           | ANSI SQL         |

Создайте **материализованное представление** `mv_dmitriy_visits_and_eats` (с сохранением данных) с информацией о пиццериях, где Дмитрий был 08.01.2022 и мог поесть дешевле 800 рублей.  

---

## Глава XI

## Упражнение 07 — Обновим наше состояние

| Упражнение 07: Обновим наше состояние |                                                                            |
| ------------------------------------- | -------------------------------------------------------------------------- |
| Директория для сдачи                  | ex07                                                                       |
| Файлы для сдачи                       | `day04_ex07.sql`                                                           |
| **Разрешено**                         |                                                                            |
| Язык                                  | ANSI SQL                                                                   |
| **Запрещено**                         |                                                                            |
| Схема SQL                             | Нельзя использовать прямые числа для PK, person, pizzeria идентификаторов. |

Добавьте новый визит Дмитрия (но в другую пиццерию) и обновите `mv_dmitriy_visits_and_eats`.  

---

## Глава XII

## Упражнение 08 — Просто очистим базу данных

| Упражнение 08: Просто очистим базу данных |                  |
| ----------------------------------------- | ---------------- |
| Директория для сдачи                      | ex08             |
| Файлы для сдачи                           | `day04_ex08.sql` |
| **Разрешено**                             |                  |
| Язык                                      | ANSI SQL         |

В финале — удалите все виртуальные таблицы и материализованное представление.  

---
